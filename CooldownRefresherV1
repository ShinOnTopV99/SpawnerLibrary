local CoreGui = game:GetService("CoreGui")

local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "CooldownChangerGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true

-- Main frame with gradient
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 280, 0, 240)
Frame.Position = UDim2.new(0, 100, 0, 100)
Frame.BackgroundColor3 = Color3.fromRGB(70, 0, 120)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.ZIndex = 5
Frame.Parent = ScreenGui

local UIGradient = Instance.new("UIGradient", Frame)
UIGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(90, 0, 160)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 100, 200))
})
UIGradient.Rotation = 45

local Corner = Instance.new("UICorner", Frame)
Corner.CornerRadius = UDim.new(0, 12)

-- Glow shadow
local Shadow = Instance.new("ImageLabel")
Shadow.Size = UDim2.new(1, 40, 1, 40)
Shadow.Position = UDim2.new(0, -20, 0, -20)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://1316045217"
Shadow.ImageColor3 = Color3.fromRGB(150, 0, 255)
Shadow.ImageTransparency = 0.7
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
Shadow.ZIndex = 4
Shadow.Parent = Frame

-- Header
local Header = Instance.new("TextLabel")
Header.Size = UDim2.new(1, -60, 0, 35)
Header.Position = UDim2.new(0, 10, 0, 0)
Header.BackgroundTransparency = 1
Header.Text = "Cooldown Editor"
Header.TextColor3 = Color3.fromRGB(255, 255, 255)
Header.Font = Enum.Font.GothamBold
Header.TextSize = 16
Header.TextXAlignment = Enum.TextXAlignment.Left
Header.ZIndex = 6
Header.Parent = Frame

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 25, 0, 25)
CloseBtn.Position = UDim2.new(1, -30, 0, 5)
CloseBtn.Text = "âœ•"
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 14
CloseBtn.BorderSizePixel = 0
CloseBtn.ZIndex = 6
CloseBtn.Parent = Frame
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(1, 0)

-- Minimize Button
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 25, 0, 25)
MinBtn.Position = UDim2.new(1, -60, 0, 5)
MinBtn.Text = "â€”"
MinBtn.BackgroundColor3 = Color3.fromRGB(90, 90, 140)
MinBtn.TextColor3 = Color3.new(1, 1, 1)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 14
MinBtn.BorderSizePixel = 0
MinBtn.ZIndex = 6
MinBtn.Parent = Frame
Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(1, 0)

-- Helper label styling
local function makeLabel(text, y)
	local lbl = Instance.new("TextLabel")
	lbl.Size = UDim2.new(1, -30, 0, 15)
	lbl.Position = UDim2.new(0, 15, 0, y)
	lbl.BackgroundTransparency = 1
	lbl.Text = text
	lbl.TextColor3 = Color3.fromRGB(220, 220, 255)
	lbl.Font = Enum.Font.Gotham
	lbl.TextSize = 11
	lbl.TextXAlignment = Enum.TextXAlignment.Left
	lbl.ZIndex = 6
	lbl.Parent = Frame
	return lbl
end

-- Helper textbox styling
local function makeBox(y)
	local box = Instance.new("TextBox")
	box.Size = UDim2.new(1, -30, 0, 22)
	box.Position = UDim2.new(0, 15, 0, y)
	box.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	box.BackgroundTransparency = 0.05
	box.TextColor3 = Color3.new(0, 0, 0)
	box.Font = Enum.Font.Gotham
	box.TextSize = 11
	box.BorderSizePixel = 0
	box.ZIndex = 6
	box.Parent = Frame
	Instance.new("UICorner", box).CornerRadius = UDim.new(0, 6)
	return box
end

-- Inputs
makeLabel("Pet Name", 40)
local PetNameBox = makeBox(57)

makeLabel("Pet Age", 85)
local PetAgeBox = makeBox(102)

makeLabel("Cooldown (e.g. 14:50)", 130)
local CooldownBox = makeBox(147)

-- Apply Button
local Button = Instance.new("TextButton")
Button.Size = UDim2.new(1, -30, 0, 25)
Button.Position = UDim2.new(0, 15, 0, 175)
Button.Text = "Apply & Freeze Cooldown"
Button.BackgroundColor3 = Color3.fromRGB(120, 0, 200)
Button.TextColor3 = Color3.new(1, 1, 1)
Button.TextSize = 11
Button.Font = Enum.Font.GothamBold
Button.BorderSizePixel = 0
Button.ZIndex = 6
Button.Parent = Frame
Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 6)

-- Progress Bar
local ProgressBarBG = Instance.new("Frame")
ProgressBarBG.Size = UDim2.new(1, -30, 0, 12)
ProgressBarBG.Position = UDim2.new(0, 15, 0, 207)
ProgressBarBG.BackgroundColor3 = Color3.fromRGB(90, 0, 140)
ProgressBarBG.BackgroundTransparency = 0.2
ProgressBarBG.BorderSizePixel = 0
ProgressBarBG.ZIndex = 6
ProgressBarBG.Parent = Frame
Instance.new("UICorner", ProgressBarBG).CornerRadius = UDim.new(0, 6)

local ProgressFill = Instance.new("Frame", ProgressBarBG)
ProgressFill.Size = UDim2.new(0, 0, 1, 0)
ProgressFill.BackgroundColor3 = Color3.fromRGB(170, 80, 255)
ProgressFill.BorderSizePixel = 0
ProgressFill.ZIndex = 6
Instance.new("UICorner", ProgressFill).CornerRadius = UDim.new(0, 6)

local PercentLabel = Instance.new("TextLabel", ProgressBarBG)
PercentLabel.Size = UDim2.new(1, 0, 1, 0)
PercentLabel.BackgroundTransparency = 1
PercentLabel.Text = "0%"
PercentLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PercentLabel.Font = Enum.Font.Gotham
PercentLabel.TextSize = 10
PercentLabel.TextXAlignment = Enum.TextXAlignment.Center
PercentLabel.ZIndex = 7

-- Credit
local Credit = Instance.new("TextLabel", Frame)
Credit.Size = UDim2.new(1, -15, 0, 12)
Credit.Position = UDim2.new(0, 10, 1, -17)
Credit.BackgroundTransparency = 1
Credit.Text = "ðŸ’œ ShinHub Cooldown"
Credit.TextColor3 = Color3.fromRGB(200, 200, 255)
Credit.Font = Enum.Font.Gotham
Credit.TextSize = 10
Credit.TextXAlignment = Enum.TextXAlignment.Right
Credit.ZIndex = 6

-- ===== Original Cooldown Logic =====
local userCooldown = nil
local frozenLabels = {}
local connections = {}
local freezeEnabled = false

local function freezeLabel(label)
	if frozenLabels[label] then return end
	frozenLabels[label] = true
	local after = label.Text:match("m(.*)") or ""
	local frozenText = "Every " .. userCooldown .. "m" .. after
	label.Text = frozenText
	local connection = label:GetPropertyChangedSignal("Text"):Connect(function()
		if freezeEnabled and label.Text ~= frozenText then
			label.Text = frozenText
		end
	end)
	connections[label] = connection
	label.AncestryChanged:Connect(function()
		if not label.Parent then
			frozenLabels[label] = nil
			if connections[label] then
				connections[label]:Disconnect()
				connections[label] = nil
			end
		end
	end)
end

task.spawn(function()
	while true do
		if userCooldown and freezeEnabled then
			for _, v in ipairs(game:GetDescendants()) do
				if v:IsA("TextLabel") and v.Text:find("^Every%s%d+:%d+m") and not frozenLabels[v] then
					freezeLabel(v)
				end
			end
			for label, _ in pairs(frozenLabels) do
				if label.Parent then
					local after = label.Text:match("m(.*)") or ""
					local expectedText = "Every " .. userCooldown .. "m" .. after
					if label.Text ~= expectedText then
						label.Text = expectedText
					end
				end
			end
		elseif userCooldown and not freezeEnabled then
			for _, v in ipairs(game:GetDescendants()) do
				if v:IsA("TextLabel") and v.Text:find("^Every%s%d+:%d+m") and not v.Text:find("Every " .. userCooldown .. "m") then
					local after = v.Text:match("m(.*)") or ""
					v.Text = "Every " .. userCooldown .. "m" .. after
				end
			end
		end
		task.wait(freezeEnabled and 0.1 or 2)
	end
end)

Button.MouseButton1Click:Connect(function()
	local text = CooldownBox.Text
	if text and #text > 0 then
		local duration = 3
		local startTime = tick()
		ProgressFill.Size = UDim2.new(0, 0, 1, 0)
		PercentLabel.Text = "0%"
		Button.Text = "Applying..."
		Button.TextColor3 = Color3.fromRGB(200, 200, 200)
		task.spawn(function()
			while true do
				local elapsed = tick() - startTime
				local percent = math.clamp((elapsed / duration) * 100, 0, 100)
				ProgressFill.Size = UDim2.new(percent / 100, 0, 1, 0)
				PercentLabel.Text = string.format("%d%%", percent)
				if percent >= 100 then
					userCooldown = text
					freezeEnabled = true
					Button.Text = "ðŸ§Š FROZEN"
					Button.TextColor3 = Color3.fromRGB(200, 255, 255)
					Button.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
					break
				end
				task.wait(0.1)
			end
		end)
	end
end)

CloseBtn.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

MinBtn.MouseButton1Click:Connect(function()
	Frame.Visible = false
	local ReopenBtn = Instance.new("TextButton")
	ReopenBtn.Size = UDim2.new(0, 120, 0, 25)
	ReopenBtn.Position = UDim2.new(0, 20, 0, 80)
	ReopenBtn.Text = "Open Cooldown"
	ReopenBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 80)
	ReopenBtn.TextColor3 = Color3.new(1, 1, 1)
	ReopenBtn.Font = Enum.Font.Gotham
	ReopenBtn.TextSize = 12
	ReopenBtn.ZIndex = 10
	ReopenBtn.Parent = ScreenGui
	Instance.new("UICorner", ReopenBtn).CornerRadius = UDim.new(0, 6)
	ReopenBtn.MouseButton1Click:Connect(function()
		Frame.Visible = true
		ReopenBtn:Destroy()
	end)
end)
